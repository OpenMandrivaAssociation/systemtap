--- systemtap-2.4/remote.cxx.0003~	2013-11-06 17:33:23.000000000 +0100
+++ systemtap-2.4/remote.cxx	2013-12-25 19:25:53.426246635 +0100
@@ -662,13 +662,16 @@ class unix_stapsh : public stapsh {
         for (unsigned i = 1; i < s.perpass_verbose[4]; i++)
           this->options.push_back("verbose");
 
-        sockaddr_un server;
-        server.sun_family = AF_UNIX;
+	union {
+	    sockaddr_un un;
+	    sockaddr sa;
+	} server;
+
         if (ud.path.empty())
           throw runtime_error(_("unix target requires a /path"));
-        if (ud.path.size() > sizeof(server.sun_path) - 1)
+        if (ud.path.size() > sizeof(server.un.sun_path) - 1)
           throw runtime_error(_("unix target /path is too long"));
-        strcpy(server.sun_path, ud.path.c_str());
+        strcpy(server.un.sun_path, ud.path.c_str());
 
         if (ud.has_authority)
           throw runtime_error(_("unix target doesn't support a hostname"));
@@ -681,7 +684,7 @@ class unix_stapsh : public stapsh {
         if (fd <= 0)
           throw runtime_error(_("error opening a socket"));
 
-        if (connect(fd, (struct sockaddr *)&server, SUN_LEN(&server)) < 0)
+        if (connect(fd, &server.sa, SUN_LEN(&server.un)) < 0)
           {
             const char *msg = strerror(errno);
             ::close(fd);
